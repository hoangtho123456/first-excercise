<!DOCTYPE html>
<html>
<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta content="ja" http-equiv="Content-Language">
  <meta content="text/css" http-equiv="Content-Style-Type">
  <meta content="text/javascript" http-equiv="Content-Script-Type">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Smart Phone Program for Visiting Nurse Business software</title>
</head>
<style type="text/css">
body { background-color: #efefef; }
.container {
  max-width: 454px;
  margin: auto; 
  background-color: #2d2d2d;
}
.calen-show > table {
  width: 454px;
  height: 296px;
}
.calen-show tr > td {
  cursor: pointer;
  width: 60px;
  height: 30px;
  text-align: center;
}

/*When mouse over any cell, will show border of cell*/
.calen-button {
  cursor: pointer;
  text-align: center;
  color: #80b5d8;
  background-color: #a9cce3;
}
.calen-select { 
  cursor: pointer; 
  height: 100%; 
}
.calen-days {
  font-size: 24px;
  //font-weight: bold;
  text-align: center;
  //color: red;
  //background-color: #bebebe;
}

#picked_day {
  width: 50%;
  height: 20px;
  font-size: 18px;
  text-align: center;
  background-size: contain;
  background-color: white;
}
</style>
<body>
  <div id=calendar-container>
    <div id="calendar-dates">
      <input id="picked_day" type="text" name="">
      <div id="calendar-header">
        <span id="prev" onclick="chooseYear(-1);"><</span>
        <select class="calen-select" id="calen_select_years" onchange="chooseFastYear();">
        </select>
        <span id="calendar-month-year"></span>
        <select class="calen-select" id="calen_select_months" onchange="chooseFastMonth();">
          <option value="0">1</option>
          <option value="1">2</option>
          <option value="2">3</option>
          <option value="3">4</option>
          <option value="4">5</option>
          <option value="5">6</option>
          <option value="6">7</option>
          <option value="7">8</option>
          <option value="8">9</option>
          <option value="9">10</option>
          <option value="10">11</option>
          <option value="11">12</option>
        </select>
        <span id="calendar-month-year"></span>
        <span id="prev">></span>
      </div>
      <div class="calen-show">
      <table>
        <tbody>
          <tr class="calen-days">
            <td>Sun</td>
            <td>Mon</td>
            <td>Tue</td>
            <td>Web</td>
            <td>Thu</td>
            <td>Fri</td>
            <td>Sat</td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </tbody>
      </table>
    </div>
    </div>
  </div>
  <script type="text/javascript">
      /*
      @author danghoangtho1132@gmail.com (Đặng Hoàng Thọ)
      *Idea: create the action for calender like:
      *show dates of the month
      *show days of a week
      *choose fast year or fast month
      */
      var NOW = new Date(); 
      var CUR_DAY = NOW.getDate();  //the current day in pc
      var CUR_MON = NOW.getMonth(); //the current month 
      var CUR_YEAR = NOW.getFullYear(); //the current year
      var CELL_DAYS = document.getElementsByTagName('td'); //the cells in calender
      var LISTMONTH = document.getElementById("calen_select_months"); //list month in combobox-month
      var LISTYEAR = document.getElementById("calen_select_years"); //list years in combobox-year
      drawCalender(CUR_YEAR, CUR_MON);  //function use draw the days in Calender
      showListYear();  //function use show list years in the combobox-year(1954 -> 2099)
      chooseAnyDay(); //when you choose any day in calender, it will be show the border itself

      function drawCalender(year, month) {
        parseInt(year);
        parseInt(month);
        var firstDay = new Date(year, month, 1).getDay(); //get the first day of month
        var lastDate = new Date(year, month + 1, 0).getDate(); //get the Last date of month
        var i, day;
        day = 7 + firstDay;
        //cells from 13 to 55 is the days of a months
        for (var i = 7; i < 49; i++) {
          CELL_DAYS[i].innerHTML = "";
          CELL_DAYS[i].style.backgroundColor = "white";
        }
        //write number into the cells
        for (var i = 1; i <= lastDate; i++) {
          CELL_DAYS[day].innerHTML = i;
          day++;
        }
        for (var i = 7; i < 49; i++) {
          if(CELL_DAYS[i].innerHTML === "") {
            CELL_DAYS[i].style.backgroundColor = "";
          }
        }
        //it will set color "red" for current day (in pc) on calender  
        /*if (year === NOW.getFullYear()) {
          if (month === NOW.getMonth()) {
            var showCurdate = 6 + firstDay + NOW.getDate();
            CELL_DAYS[showCurdate].style.backgroundColor = "red";
          } 
        }*/
        showTimeBox(); //show CUR_MON and CUR_YEAR on combobox
      }

      //show list year in combobox of year
      function showListYear() {
        var i;

        for (i = 1954; i < 2100; i++) {
          LISTYEAR.innerHTML += "<option value='" + i + "'>" + i + "</option>";
        }
        drawCalender(CUR_YEAR, CUR_MON);
      }
      // show current date (update from pc) into the combobox-month and combobox-year
      function showTimeBox() {
        LISTMONTH.value = CUR_MON;
        LISTYEAR.value = CUR_YEAR;
      }

      /*
      *action choose Month:
      *if month < 0 (value 0 is January), current month is January
      *if month > 11 (value 11 is December), current month is December
      */
      function chooseMonth(month) {
        CUR_MON += month;
        if (CUR_MON < 0) {
          CUR_MON = 11;
          CUR_YEAR -= 1;
        }
        if (CUR_MON > 11) { 
          CUR_MON = 0;
          CUR_YEAR += 1;
        }
        checkTime();
        drawCalender(CUR_YEAR,CUR_MON);
      }
      //check if year overflow out of [1954, 2100]?
      function checkTime() {
        if (CUR_YEAR < 1954) {
          CUR_YEAR = 1954;
        }
        if (CUR_YEAR >= 2100) {
          CUR_YEAR = 2099;
        }
      }

      //When you choose a year, 
      //it will be show the current month of the year you just choose  
      function chooseYear(year) {
        CUR_YEAR = parseInt(CUR_YEAR) + parseInt(year);
        checkTime();
        drawCalender(CUR_YEAR,CUR_MON);
      }

      //it use for combobox choose fast month
      function chooseFastMonth() {
        CUR_MON = parseInt(LISTMONTH.value);
        drawCalender(CUR_YEAR, CUR_MON);
      }
      /*
      *it use for combobox choose fast year
      *@param {int} CUR_YEAR: LISTYEAR.value nust change to type INT
      */
      function chooseFastYear() {
        CUR_YEAR = parseInt(LISTYEAR.value);
        drawCalender(CUR_YEAR, CUR_MON);
      }

      //function choose day by click at the cell of the table
      function chooseAnyDay() {
        var pickedDay = document.getElementById("picked_day");
        pickedDay.value = CUR_DAY + "/" + (CUR_MON + 1) + "/"+ CUR_YEAR;
        var i, picked_cell;

        for (i = 7; i < 49; i++) {
          CELL_DAYS[i].addEventListener("click", function() {
          var dayCheck = this.innerHTML;

            for (var j = 7; j < 49; j++) {
              CELL_DAYS[j].style.backgroundColor = "white";
            }
            if (dayCheck != "") {
              pickedDay.value = dayCheck + "/" + (CUR_MON + 1) + "/"+ CUR_YEAR;
              this.style.backgroundColor = "yellow";
            }
          });
        }
      }
  </script>
</body>
</html>